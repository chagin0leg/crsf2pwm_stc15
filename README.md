# CRSF to PWM Converter for STC15F104W

[English (Auto-translated)](README.en.md) | **Русский**

Конвертер протокола CRSF (Crossfire) в PWM сигналы для микроконтроллера STC15F104W. Проект предназначен для использования в RC моделях, где требуется преобразование цифрового протокола CRSF в аналоговые PWM сигналы для управления сервоприводами.

## Особенности

- Поддержка до 5 PWM каналов
- Прием CRSF протокола через UART на скорости 115200 бод
- Генерация PWM сигналов с настраиваемой шириной импульса
- Базовая валидация входных сигналов и обработка сбоев
- Работа на частоте внутреннего 22.1184 МГц

## Требования

- Микроконтроллер STC15F104W
- Классический USB-UART адаптер (СH340, PL2101, FT232 и другие, можно и не стандартные типа WCH-Link)
- Передатчик с поддержкой CRSF протокола
- Сервоприводы для тестирования

## Схема подключения

```
STC15F104W
    |
    |-- P3.1 -> PWM Channel 1
    |-- P3.2 -> PWM Channel 2
    |-- P3.3 -> PWM Channel 3
    |-- P3.4 -> PWM Channel 4
    |-- P3.5 -> PWM Channel 5
    |
    |-- P3.0 (RXD) <- CRSF RX
    |-- P3.1 (TXD) -> CRSF TX (не используется)
    |
    |-- GND <- GND от источника питания
    |-- VCC <- +5V от источника питания
```

## Сборка проекта

1. Установите [Visual Studio Code](https://code.visualstudio.com/)
2. Установите расширение [PlatformIO IDE](https://platformio.org/install/ide?install=vscode)
3. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/chagin0leg/crsf2pwm_stc15.git
   cd crsf2pwm_stc15
   ```
4. Откройте проект в VS Code
5. Дождитесь установки зависимостей PlatformIO
6. Нажмите кнопку Build (✓) в нижней панели PlatformIO или используйте сочетание клавиш Ctrl+Alt+B

## Прошивка

1. Подключите программатор к микроконтроллеру к тем же пинам, что и CRSF (P3.0 (RXD) и P3.1 (TXD))
2. Нажмите кнопку Upload (→) в нижней панели PlatformIO или используйте сочетание клавиш Ctrl+Alt+U
3. Следуйте инструкциям (обычно просит переподать питание) и дождитесь завершения прошивки

## Использование

1. Подключите передатчик с поддержкой CRSF к пину P3.0 (RXD)
2. Подключите сервоприводы к пинам P3.1 - P3.5
3. Подайте питание на микроконтроллер
4. Настройте передатчик на работу в режиме CRSF

## Лицензия

Проект распространяется под лицензией MIT. Подробности в файле [LICENSE](LICENSE).

## Автор

- **Chagin O.S.** - [GitHub](https://github.com/chagin0leg)

## Вклад в проект

Если вы хотите внести свой вклад в проект:
1. Форкните репозиторий
2. Создайте ветку для ваших изменений (`git checkout -b feature/amazing-feature`)
3. Зафиксируйте изменения (`git commit -m 'Add some amazing feature'`)
4. Отправьте изменения в ваш форк (`git push origin feature/amazing-feature`)
5. Создайте Pull Request 